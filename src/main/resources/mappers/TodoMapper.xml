<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="my.mvc.mappers.TodoMapper">

    <!-- TodoMapper id = insert  -->
    <insert id="insert">
        insert into tbl_todo (title,content,writer,dueDate)
        values (#{title},#{content},#{writer},#{dueDate})
        <selectKey resultType="long" keyProperty="tno" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>

    <!-- TodoMapper id = read -->
    <select id="read" parameterType="long" resultType="my.mvc.domain.TodoDTO">
        select tno, title, content, writer, dueDate from tbl_todo
        where tno = #{tno}
    </select>

    <!-- TodoMapper id = list -->
    <select id="list" resultType="my.mvc.domain.TodoDTO">
        select * from tbl_todo
        where tno > 0
        order by tno desc
        limit #{skip}, #{size}
    </select>

    <!-- TodoMapper id = listCount -->
    <select id="listCount" resultType="long">
        select count(*)
        from
        (select tno from tbl_todo
        where tno > 0 limit #{countEnd}) todo
    </select>

    <!-- TodoMapper id = delete -->
    <delete id="delete" parameterType="long">
        delete from tbl_todo
        where tno = #{tno}
    </delete>



</mapper>